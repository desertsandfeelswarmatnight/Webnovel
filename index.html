<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>무명</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    
    <link href="header.css?after" rel="stylesheet">
    <link href="main.css?after" rel="stylesheet">
    <link href="Log.in.css" rel="stylesheet">
</head>

<body>
    <div id="grid_container">
        <div id="header_border1"></div>
        <header id="header_grid-container">
            <nav id="header_flex-container">
                <div class="header_title">
                    <h1>무명</h1>
                    <ul id="header-list">
                        <li><a href="#" onclick="clk1()">게시판</a></li>
                        <li><a href="#" onclick="clk1()">TOP10</a></li>
                        <li><a href="#" onclick="clk1()">장르</a></li>
                        <li><a href="#" onclick="clk1()">신작</a></li>
                    </ul>
                </div>

                <div class="header-flex-item">
                    <button style="margin-right: 20px;" onclick="clk1()">검색</button>
                    <button style="margin-right: 20px;" id="upload">올리기</button>
                    <button onclick="log_in()">프로필</button>
                </div>
            </nav>
        </header>
        <div id="header_border2"></div>
        
        <main id="main_grid-container">
            <section id="log_in-background" class="modal-overlay">
                <div id="log_in-container">

                
                    <form>
                        <h1 style='text-align: center; padding: 45px 0px 45px 0px; font-size: 22px;'>로그인</h1>
                        <div class="main_flex-container">
                            <!-- <span class="ms-auto mx-2" id="userName">dasdsadas</span> -->
                            
                            <div class="main_flex-item">
                                <input type="text" id="ID" placeholder="아이디를 입력하세요!" autocomplete="off">
                            </div>
                            
                            <div class="main_flex-item">
                                <input type="password" id="password" placeholder="비밀번호를 입력하세요!" autocomplete="off">
                            </div>
                            
                            <div class="main_flex-item">
                                <input type="checkbox" name="log-in_maintain">
                                <label for="log-in_maintain">로그인 상태 유지</label>
                            </div>
                            
                            <div class="main_flex-item">
                                <button type="submit" name="enter" id="enter" style="margin-top: 3px;">로그인 </button>
                            </div>
                        </div> 
        
                        <div class="supplement_flex-container">
                            <div class="supplement_flex-item">
                                <a href="Sign.Up.html" target="_blank" title="sign-up">회원 가입</a>
                            </div>
        
                            <div class="supplement_flex-item">
                                <a href="" style="border-right: 1px solid gray; padding-right: 7px;">아이디 찾기</a>
                                <a href="">비밀번호 찾기</a>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
            
            
            
            
            
            
            
            
            
            <section id="qwer">
                <article id="qwe">
                    <img id="image" src="img/IMG_6584.jpg" alt="집 잘못 찾아오셨어요, 악역님">
                    <div id="text">
                        <h2 style="font-weight: 800;">집 잘못 찾아오셨어요, 악역님.</h2>
                        <h5 style="font-weight: 600;">작가 마르크스</h5>
                        <h6>빈민가의 아이로 환생한 것도 모자라
                            범죄도시로 흘러들어가 실험체가 되었다.

                            그러다 연구소를 파괴하러 온 남자를 보고
                            이곳이 피폐 역하렘 소설의 세계란 사실을 깨달았다.

                            그 후 연구소에서 벗어나 나름대로 평범한 인생을 살던 중
                            여주인공이 옆집에 이사를 왔다.

                            아무래도 나는 여주인공의 이웃집에 엑스트라인 모양이다.

                            원래대로라면 여주인공이 치명상을 입고 쓰러진 악역을 구해주고
                            그 대가로 광적인 집착을 받아야 했다.

                            그런데 어째서인지 악역 서브남이 내 집 앞에 기절해 있는 것이 아닌가?

                            악역 서브남인 라키어스 아발론은 암흑세계의 왕으로,
                            예전에 연구소에서 만났던 바로 그 무시무시한 남자였다.

                            "……."

                            잠깐 주변을 살피다가 남자의 몸을 발로 슥 밀어냈다.


                            집 잘못 찾아오셨어요, 악역님.</h6>
                    </div>
                </article>
                <article id="qwe">
                    <img id="image" src="img/makima%20chainsaw%20man.jpg" alt="마키마씨">
                    <div id="text">
                        <h2 style="font-weight: 800;">마키마씨</h2>
                        <h5 style="font-weight: 600; padding-bottom: 2px;">작가 미상</h5>
                        <h6>예쁜 마키마씨입니다
                        
                        ෆ˙ ᵕ ˙ෆ 
                            
                        ๑❤‿❤๑ 	&nbsp;	&nbsp; ( ◜◒◝ )♡ 
                            
                            
                        ❤⃛ヾ(๑❛ ▿ ◠๑ )
                        
                        </h6>
                    </div>
                </article>
            </section>
        </main>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>
    <script src="firebaseSDK.js"></script>
    
    <script>
        const db = firebase.firestore()
        db.collection('POST').get().then(결과=>{
            결과.forEach(doc => {
                const temp = document.createElement('article')
                temp.setAttribute('id','qwe')
                temp.innerHTML =
                `
                    <img id="image" src="${doc.data().경로}" alt="${doc.data().이름}" onclick=location.href="detail.html?id=${doc.id}" onmouseenter=document.body.style.cursor="pointer" onmouseleave=document.body.style.cursor="default">
                    
                    <div id="text">
                        <h2 style="font-weight: 800;">${doc.data().이름}</h2>
                        <h5 style="font-weight: 600; padding-bottom: 2px;">작가 ${doc.data().작가}</h5>
                        <h6>${doc.data().설명}</h6>
                    </div>
                
                `
                document.getElementById('qwer').append(temp)
            })
        })
        
        function clk1() { alert('아잉 준비중 >_<') }

        function log_in() {
            // document.getElementById('main_grid-container').style.backgroundColor = 'darkgrey'
            document.getElementById('log_in-background').style = 'position: fixed; top:0; left: 0; bottom: 0; right: 0; background: rgba(0, 0, 0, 0.8);'

            document.getElementById('log_in-container').style.display = 'block';
        }





        document.getElementById('log_in-background').addEventListener("click", e => {
            const evTarget = e.target
            if(evTarget.classList.contains("modal-overlay")) {
                document.getElementById('log_in-background').style.display = "none"
            }
        })



        document.getElementById('enter').addEventListener('click',function(e){
            e.preventDefault()
            
            firebase.auth().onAuthStateChanged(user=>{ //유저가 로그인시 / 로그아웃시 / 페이지 새로고침시 동작
                if(user) {
                    console.log(user.uid)
                    console.log(user.displayName)
                    localStorage.setItem('user', JSON.stringify(user))
                }
                else
                    localStorage.removeItem('user')
            })

            let 이메일값 = document.getElementById('ID').value
            let 비밀번호값 = document.getElementById('password').value

            firebase.auth().signInWithEmailAndPassword(이메일값, 비밀번호값).then((result) => {
                
                console.log(result.user)
                console.log(result.user.displayName)
                document.getElementById("userName").innerHTML = JSON.parse(localStorage.getItem('user')).displayName
                alert("로그인에 성공하셨습니다.")
                window.location.href = "/html/index.html"
            }).catch(err=>{
                console.log(err.message)
            })
        })





        document.getElementById('upload').addEventListener('click',function() { window.location.href='upload.html' })
    </script>
</body>
</html>